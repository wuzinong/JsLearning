<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="UTF-8">
	<title>Subscribe and publish</title>
</head>
<body>
	

	<script type="text/javascript">
		window.onload = function(){
		    var PubSub = {
		    	subscribe:function(ev,callback){
		    		 var call = (this._callbacks || (this._callbacks={}));
		    		 (this._callbacks[ev] || (this._callbacks[ev] = [])).push(callback);
		    		 return this;
		    	},
		    	publish:function(){
		    		 var args = Array.prototype.slice.call(arguments);
		    		 var ev = args.shift();
		    		 var i,l,calls,list;
		    		 if(!(calls = this._callbacks)) return this;
		    		 if(!(list = this._callbacks[ev])) return this;

		    		 for(var i=0,l=list.length;i<l;i++){
		    		 	 list[i].apply(this);
		    		 }
		    		 return this;
		    	}
		    }

		    PubSub.subscribe("www",function(){console.log("www1")});
		    PubSub.subscribe("www",function(){console.log("www2")});
		    PubSub.subscribe("www",function(){console.log("www3")});
		    PubSub.publish("www");
		}
	</script>

</body>
</html>